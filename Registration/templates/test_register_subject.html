{% extends "dashboard_faculty.html" %}
{% block extra_style %}
    label {
    margin-left: 0px !important;
    }

    /*check box style*/
    .checkbox {
    padding-left: 20px; }
    .checkbox label {
    display: inline-block;
    position: relative;
    padding-left: 5px; }
    .checkbox label::before {
    content: "";
    display: inline-block;
    position: absolute;
    width: 17px;
    height: 17px;
    left: 0;
    margin-left: -20px;
    border: 1px solid #cccccc;
    border-radius: 3px;
    background-color: #fff;
    -webkit-transition: border 0.15s ease-in-out, color 0.15s ease-in-out;
    -o-transition: border 0.15s ease-in-out, color 0.15s ease-in-out;
    transition: border 0.15s ease-in-out, color 0.15s ease-in-out; }
    .checkbox label::after {
    display: inline-block;
    position: absolute;
    width: 16px;
    height: 16px;
    left: 0;
    top: 0;
    margin-left: -20px;
    padding-left: 3px;
    padding-top: 1px;
    font-size: 11px;
    color: #555555; }
    .checkbox input[type="checkbox"] {
    opacity: 0; }
    .checkbox input[type="checkbox"]:focus + label::before {
    outline: thin dotted;
    outline: 5px auto -webkit-focus-ring-color;
    outline-offset: -2px; }
    .checkbox input[type="checkbox"]:checked + label::after {
    font-family: 'FontAwesome';
    content: "\f00c"; }
    .checkbox input[type="checkbox"]:disabled + label {
    opacity: 0.65; }
    .checkbox input[type="checkbox"]:disabled + label::before {
    background-color: #eeeeee;
    cursor: not-allowed; }
    .checkbox.checkbox-circle label::before {
    border-radius: 50%; }
    .checkbox.checkbox-inline {
    margin-top: 0; }

    .checkbox-primary input[type="checkbox"]:checked + label::before {
    background-color: #428bca;
    border-color: #428bca; }
    .checkbox-primary input[type="checkbox"]:checked + label::after {
    color: #fff; }

    .checkbox-danger input[type="checkbox"]:checked + label::before {
    background-color: #d9534f;
    border-color: #d9534f; }
    .checkbox-danger input[type="checkbox"]:checked + label::after {
    color: #fff; }

    .checkbox-info input[type="checkbox"]:checked + label::before {
    background-color: #5bc0de;
    border-color: #5bc0de; }
    .checkbox-info input[type="checkbox"]:checked + label::after {
    color: #fff; }

    .checkbox-warning input[type="checkbox"]:checked + label::before {
    background-color: #f0ad4e;
    border-color: #f0ad4e; }
    .checkbox-warning input[type="checkbox"]:checked + label::after {
    color: #fff; }

    .checkbox-success input[type="checkbox"]:checked + label::before {
    background-color: #5cb85c;
    border-color: #5cb85c; }
    .checkbox-success input[type="checkbox"]:checked + label::after {
    color: #fff; }

    .radio {
    padding-left: 20px; }
    .radio label {
    display: inline-block;
    position: relative;
    padding-left: 5px; }
    .radio label::before {
    content: "";
    display: inline-block;
    position: absolute;
    width: 17px;
    height: 17px;
    left: 0;
    margin-left: -20px;
    border: 1px solid #cccccc;
    border-radius: 50%;
    background-color: #fff;
    -webkit-transition: border 0.15s ease-in-out;
    -o-transition: border 0.15s ease-in-out;
    transition: border 0.15s ease-in-out; }
    .radio label::after {
    display: inline-block;
    position: absolute;
    content: " ";
    width: 11px;
    height: 11px;
    left: 3px;
    top: 3px;
    margin-left: -20px;
    border-radius: 50%;
    background-color: #555555;
    -webkit-transform: scale(0, 0);
    -ms-transform: scale(0, 0);
    -o-transform: scale(0, 0);
    transform: scale(0, 0);
    -webkit-transition: -webkit-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
    -moz-transition: -moz-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
    -o-transition: -o-transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33);
    transition: transform 0.1s cubic-bezier(0.8, -0.33, 0.2, 1.33); }
    .radio input[type="radio"] {
    opacity: 0; }
    .radio input[type="radio"]:focus + label::before {
    outline: thin dotted;
    outline: 5px auto -webkit-focus-ring-color;
    outline-offset: -2px; }
    .radio input[type="radio"]:checked + label::after {
    -webkit-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    -o-transform: scale(1, 1);
    transform: scale(1, 1); }
    .radio input[type="radio"]:disabled + label {
    opacity: 0.65; }
    .radio input[type="radio"]:disabled + label::before {
    cursor: not-allowed; }
    .radio.radio-inline {
    margin-top: 0; }

    .radio-primary input[type="radio"] + label::after {
    background-color: #428bca; }
    .radio-primary input[type="radio"]:checked + label::before {
    border-color: #428bca; }
    .radio-primary input[type="radio"]:checked + label::after {
    background-color: #428bca; }

    .radio-danger input[type="radio"] + label::after {
    background-color: #d9534f; }
    .radio-danger input[type="radio"]:checked + label::before {
    border-color: #d9534f; }
    .radio-danger input[type="radio"]:checked + label::after {
    background-color: #d9534f; }

    .radio-info input[type="radio"] + label::after {
    background-color: #5bc0de; }
    .radio-info input[type="radio"]:checked + label::before {
    border-color: #5bc0de; }
    .radio-info input[type="radio"]:checked + label::after {
    background-color: #5bc0de; }

    .radio-warning input[type="radio"] + label::after {
    background-color: #f0ad4e; }
    .radio-warning input[type="radio"]:checked + label::before {
    border-color: #f0ad4e; }
    .radio-warning input[type="radio"]:checked + label::after {
    background-color: #f0ad4e; }

    .radio-success input[type="radio"] + label::after {
    background-color: #5cb85c; }
    .radio-success input[type="radio"]:checked + label::before {
    border-color: #5cb85c; }
    .radio-success input[type="radio"]:checked + label::after {
    background-color: #5cb85c; }

    .checkbox-primary > label{
    font-weight:700;
    }

{% endblock extra_style %}
{% block content %}
    <div class="row col-md-3">

        <legend>Enter Subject Details</legend>
        <form method="POST" id="subject_form" action="{% url 'registration:register_subject' %}">
            {% csrf_token %}
            <div class="form-group">
                {{ form.branch.label_tag }}
                {{ form.branch }}
                {{ form.branch.errors }}
            </div>

            <div class="form-group">
                {{ form.year.label_tag }}
                {{ form.year }}
                {{ form.year.errors }}
            </div>

            <div class="form-group">
                {{ form.semester.label_tag }}
                {{ form.semester }}
                {{ form.semester.errors }}
            </div>

            <div class="form-group">
                {{ form.name.label_tag }}
                {{ form.name }}
                {{ form.name.errors }}
            </div>

            <div class="form-group">
                {{ form.short_form.label_tag }}
                {{ form.short_form }}
                {{ form.short_form.errors }}
            </div>

            <div class="form-group">
                {{ form.code.label_tag }}
                {{ form.code }}
                {{ form.code.errors }}
            </div>
            <div class="form-group">
                {{ form.course_pattern.label_tag }}
                {{ form.course_pattern }}
                {{ form.course_pattern.errors }}
            </div>
            <div class="form-group">
                {{ form.credits.label_tag }}
                {{ form.credits }}
                {{ form.credits.errors }}
            </div>

            {##}
            {#            <div class="form-group">#}
            {#                {{ form.type.label_tag }}#}
            {#                {{ form.type }}#}
            {#                {{ form.type.with_errors }}#}
            {#            </div>#}

            <div class="checkbox checkbox-primary">
                {{ form.is_practical }}
                {{ form.is_practical.label_tag }}
                {{ form.is_practical.errors }}
            </div>
            <div class="checkbox checkbox-primary">
                <input type="checkbox" onchange="showElective();" name="is_elective_group"
                       id="id_is_elective_group">
                {{ form.is_elective_group.label_tag }}
                {{ form.is_elective_group.errors }}
            </div>

            <div class="col-md-10" id="elective_div"></div>

            <div class="col-md-10 hidden" id="plus_icon_div">
                <div class="col-md-1">
                    <div class="row">
                        <button type="button" onclick="add_new_row();return false;"><span
                                class="glyphicon glyphicon-plus"></span></button>

                        <button type="button" onclick="remove_new_row();return false;"><span
                                class="glyphicon glyphicon-minus"></span></button>
                    </div>
                </div>
            </div>
            <input type="hidden" name="no_of_elective" , id="no_of_elective" style="margin: 5px;">
            <input type="submit" name="register_subject" class="btn btn-primary" style="margin: 5px;">
        </form>
        <form action={% url 'registration:view_subjects' %}>
            <input type="submit" value="View Registered Subjects" class="btn btn-primary" style="margin: 5px;">
        </form>

    </div>
    <script>
        var count = 0;

        function showElective() {
            if (document.getElementById('id_is_elective_group').checked) {
                plus_icon_div = document.getElementById("plus_icon_div");
                plus_icon_div.setAttribute('class', 'col-md-2');
                plus_icon_div.style.display = 'block';

                count++;
                elective_div = document.getElementById('elective_div');
                var label = document.createElement('label');
                label.innerText = 'Enter Name of Elective ' + count;
                label.setAttribute('id', 'label_elective_' + count);
                var input = document.createElement('input');
                input.setAttribute('type', 'text');
                input.setAttribute('name', 'elective_' + count);
                input.setAttribute('id', 'elective_' + count);
                elective_div.appendChild(label);
                elective_div.appendChild(input);
                {#elective_div.appendChild(document.createElement('br'));#}

                var label1 = document.createElement('label');
                label1.innerText = 'Enter Short Name of Elective ' + count;
                label1.setAttribute('id', 'label_elective_short_' + count);
                var input1 = document.createElement('input');
                input1.setAttribute('type', 'text');
                input1.setAttribute('name', 'elective_short_' + count);
                input1.setAttribute('id', 'elective_short_' + count);
                elective_div.appendChild(label1);
                elective_div.appendChild(input1);
                {#elective_div.appendChild(document.createElement('br'));#}

                elective_div.style.display = 'block';

                document.getElementById('no_of_elective').value = count;
            } else {
                plus_icon_div = document.getElementById("plus_icon_div");
                plus_icon_div.setAttribute('class', 'form-group hidden');
                while (count) {
                    document.getElementById('label_elective_' + count).remove();
                    document.getElementById('elective_' + count).remove();
                    document.getElementById('label_elective_short_' + count).remove();
                    document.getElementById('elective_short_' + count).remove();
                    count--;
                }
                count = 0;
                document.getElementById('no_of_elective').value = count;
            }
        }

        function add_new_row() {
            count++;
            elective_div = document.getElementById('elective_div');
            var label = document.createElement('label');
            label.innerText = 'Enter Name of Elective ' + count;
            label.setAttribute('id', 'label_elective_' + count);
            var input = document.createElement('input');
            input.setAttribute('type', 'text');

            input.setAttribute('name', 'elective_' + count);
            input.setAttribute('id', 'elective_' + count);
            elective_div.appendChild(label);
            elective_div.appendChild(input);
            {#elective_div.appendChild(document.createElement('br'));#}

            var label1 = document.createElement('label');
            label1.innerText = 'Enter Short Name of Elective ' + count;
            label1.setAttribute('id', 'label_elective_short_' + count);
            var input1 = document.createElement('input');
            input1.setAttribute('type', 'text');
            input1.setAttribute('name', 'elective_short_' + count);
            input1.setAttribute('id', 'elective_short_' + count);
            elective_div.appendChild(label1);
            elective_div.appendChild(input1);
            {#elective_div.appendChild(document.createElement('br'));#}

            elective_div.style.display = 'block';
            document.getElementById('no_of_elective').value = count;
        }

        function remove_new_row() {
            if (count) {
                document.getElementById('label_elective_' + count).remove();
                document.getElementById('elective_' + count).remove();
                document.getElementById('label_elective_short_' + count).remove();
                document.getElementById('elective_short_' + count).remove();
                count--;
                document.getElementById('no_of_elective').value = count;
            }
        }
    </script>

    {#    <script>#}
    {#        var elective_data = {{ data | safe }};#}
    {##}
    {#        function showElectiveGroup() {#}
    {#            let type = document.getElementById('id_type');#}
    {#            let branch = document.getElementById('id_branch').value;#}
    {#            let year = document.getElementById('id_year').value;#}
    {#            let semester = document.getElementById('id_semester').value;#}
    {#            let elective_div = document.getElementById('elective_group');#}
    {#            if (type.value === 'Elective') {#}
    {#                let number_of_electives = parseInt(elective_data[branch][year][semester]);#}
    {#                if(number_of_electives === 0) {#}
    {#                    alert("The" + semester + " of " + year + "of " + branch + " has no electives.");#}
    {#                    return;#}
    {#                }#}
    {#                for(let i=0;i<number_of_electives;i++) {#}
    {#                    var label = document.createTextNode(String.fromCharCode(65 + i));#}
    {#                    var input = document.createElement('input');#}
    {#                    input.setAttribute('type','radio');#}
    {#                    input.setAttribute('name','elective_group');#}
    {#                    input.setAttribute('value',i);#}
    {#                    elective_div.appendChild(input);#}
    {#                    elective_div.appendChild(label);#}
    {#                    elective_div.style.display = 'block';#}
    {#                }#}
    {#            } else {#}
    {#                for(let i=1;i<elective_div.childElementCount;i++) {#}
    {#                    elective_div.removeChild(elective_div.childNodes[i]);#}
    {#                }#}
    {#                elective_div.style.display = 'none';#}
    {#            }#}
    {#        }#}
    {#    </script>#}
{% endblock content %}